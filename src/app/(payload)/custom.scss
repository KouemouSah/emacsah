/* Portfolio CMS - Dark Elegant Admin Styles */

@layer payload {
  /* ============================================
     CSS Variables
     ============================================ */
  :root {
    --bg-dark: #0d1117;
    --bg-card: #161b22;
    --bg-input: #0d1117;
    --accent: #14b8a6;
    --accent-hover: #0d9488;
    --accent-light: rgba(20, 184, 166, 0.15);
    --text-primary: #f0f6fc;
    --text-secondary: #8b949e;
    --text-muted: #6e7681;
    --border-color: #30363d;
    --border-focus: #14b8a6;
    --radius-sm: 6px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 20px;
    --transition: 150ms ease;
  }

  /* ============================================
     Auth Pages - Dark Elegant Design
     ============================================ */
  .template-minimal {
    min-height: 100vh;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-dark);
    padding: 40px 30px;
  }

  /* Remove any pseudo-elements */
  .template-minimal::before,
  .template-minimal::after {
    display: none !important;
  }

  /* Hide default branding */
  .template-minimal__branding,
  .payload-logo,
  .graphic {
    display: none !important;
  }

  /* Main Container - Logo + Card */
  .template-minimal__wrap {
    position: relative !important;
    width: 100% !important;
    max-width: 680px !important;
    margin: 0 auto !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
  }

  /* Shield Icon - Above Card */
  .template-minimal__wrap::before {
    content: '' !important;
    display: block !important;
    width: 56px !important;
    height: 56px !important;
    margin: 0 auto 24px !important;
    background-color: var(--accent) !important;
    border-radius: var(--radius-lg) !important;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%230d1117' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z'/%3E%3Cpath d='M9 12l2 2 4-4'/%3E%3C/svg%3E") !important;
    background-size: 28px !important;
    background-position: center !important;
    background-repeat: no-repeat !important;
    flex-shrink: 0 !important;
  }

  /* Hide default ::after */
  .template-minimal__wrap::after {
    display: none !important;
  }

  /* Card Container */
  .template-minimal__wrap > *:not(style) {
    width: 100% !important;
    background: var(--bg-card) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: var(--radius-xl) !important;
    padding: 48px 44px 32px !important;
  }

  /* Typography */
  .template-minimal h1 {
    font-size: 1.75rem !important;
    font-weight: 700 !important;
    color: var(--text-primary) !important;
    margin: 0 0 8px 0 !important;
    text-align: center !important;
    letter-spacing: -0.02em !important;
  }

  .template-minimal p {
    font-size: 0.9375rem !important;
    color: var(--text-secondary) !important;
    margin: 0 0 32px 0 !important;
    text-align: center !important;
  }

  /* Form Container - Grid Layout */
  .template-minimal form {
    width: 100% !important;
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    grid-template-rows: auto auto auto auto !important;
    gap: 20px 20px !important;
  }

  /* All Field Types - Base */
  .template-minimal .field-type {
    margin: 0 !important;
    padding: 0 !important;
    position: relative !important;
  }

  /*
   * Payload field order for create-first-user:
   * 1. Email (auth)
   * 2. New Password (auth)
   * 3. Confirm Password (auth)
   * 4. Name (custom)
   * 5. Role (custom - hidden)
   *
   * Desired layout:
   * Row 1: Name (left) | Email (right)
   * Row 2: Password (left) | Confirm (right)
   */

  /* Email (1st) → Row 1, Column 2 */
  .template-minimal form > .field-type:nth-child(1) {
    grid-row: 1 !important;
    grid-column: 2 !important;
    order: 2 !important;
  }

  /* New Password (2nd) → Row 2, Column 1 */
  .template-minimal form > .field-type:nth-child(2) {
    grid-row: 2 !important;
    grid-column: 1 !important;
    order: 3 !important;
  }

  /* Confirm Password (3rd) → Row 2, Column 2 */
  .template-minimal form > .field-type:nth-child(3) {
    grid-row: 2 !important;
    grid-column: 2 !important;
    order: 4 !important;
  }

  /* Name (4th) → Row 1, Column 1 */
  .template-minimal form > .field-type:nth-child(4) {
    grid-row: 1 !important;
    grid-column: 1 !important;
    order: 1 !important;
  }

  /* Role (5th) - Hidden */
  .template-minimal form > .field-type:nth-child(5) {
    display: none !important;
  }

  /* Submit button - Full width, Row 3 */
  .template-minimal .form-submit {
    grid-row: 3 !important;
    grid-column: 1 / -1 !important;
    order: 5 !important;
    margin-top: 8px !important;
    padding: 0 !important;
  }

  /* Labels */
  .template-minimal label.field-label:not(.unstyled) {
    display: block !important;
    font-size: 0.8125rem !important;
    font-weight: 500 !important;
    color: var(--text-secondary) !important;
    margin-bottom: 10px !important;
    padding: 0 !important;
  }

  .template-minimal .field-label .required {
    color: var(--accent) !important;
    margin-left: 2px !important;
  }

  /* Input wrapper for icon positioning */
  .template-minimal .field-type__wrap {
    position: relative !important;
  }

  /* Input Fields */
  .template-minimal input[type="text"],
  .template-minimal input[type="email"],
  .template-minimal input[type="password"] {
    width: 100% !important;
    height: 50px !important;
    padding: 0 16px 0 48px !important;
    font-size: 0.9375rem !important;
    font-family: inherit !important;
    background: var(--bg-input) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: var(--radius-md) !important;
    color: var(--text-primary) !important;
    transition: border-color var(--transition), box-shadow var(--transition) !important;

    &::placeholder {
      color: var(--text-muted) !important;
    }

    &:hover {
      border-color: #484f58 !important;
    }

    &:focus {
      outline: none !important;
      border-color: var(--border-focus) !important;
      box-shadow: 0 0 0 3px var(--accent-light) !important;
    }
  }

  /* Icons inside inputs - using ::before on wrapper */
  .template-minimal .field-type__wrap::before {
    content: '' !important;
    position: absolute !important;
    left: 16px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    width: 20px !important;
    height: 20px !important;
    background-color: var(--accent) !important;
    mask-size: contain !important;
    mask-repeat: no-repeat !important;
    mask-position: center !important;
    -webkit-mask-size: contain !important;
    -webkit-mask-repeat: no-repeat !important;
    -webkit-mask-position: center !important;
    pointer-events: none !important;
    z-index: 1 !important;
  }

  /* Name icon (user) - 4th field */
  .template-minimal form > .field-type:nth-child(4) .field-type__wrap::before {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2'/%3E%3Ccircle cx='12' cy='7' r='4'/%3E%3C/svg%3E") !important;
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2'/%3E%3Ccircle cx='12' cy='7' r='4'/%3E%3C/svg%3E") !important;
  }

  /* Email icon - 1st field */
  .template-minimal form > .field-type:nth-child(1) .field-type__wrap::before {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z'/%3E%3Cpolyline points='22,6 12,13 2,6'/%3E%3C/svg%3E") !important;
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z'/%3E%3Cpolyline points='22,6 12,13 2,6'/%3E%3C/svg%3E") !important;
  }

  /* Password icon (lock) - 2nd field */
  .template-minimal form > .field-type:nth-child(2) .field-type__wrap::before {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Crect x='3' y='11' width='18' height='11' rx='2' ry='2'/%3E%3Cpath d='M7 11V7a5 5 0 0 1 10 0v4'/%3E%3C/svg%3E") !important;
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Crect x='3' y='11' width='18' height='11' rx='2' ry='2'/%3E%3Cpath d='M7 11V7a5 5 0 0 1 10 0v4'/%3E%3C/svg%3E") !important;
  }

  /* Confirm Password icon (lock check) - 3rd field */
  .template-minimal form > .field-type:nth-child(3) .field-type__wrap::before {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Crect x='3' y='11' width='18' height='11' rx='2' ry='2'/%3E%3Cpath d='M7 11V7a5 5 0 0 1 10 0v4'/%3E%3Cpath d='M9 16l2 2 4-4'/%3E%3C/svg%3E") !important;
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Crect x='3' y='11' width='18' height='11' rx='2' ry='2'/%3E%3Cpath d='M7 11V7a5 5 0 0 1 10 0v4'/%3E%3Cpath d='M9 16l2 2 4-4'/%3E%3C/svg%3E") !important;
  }

  /* Password hint - smaller */
  .template-minimal .field-description {
    font-size: 0.6875rem !important;
    color: var(--text-muted) !important;
    margin-top: 6px !important;
  }

  /* Select Styling (hidden but styled as backup) */
  .template-minimal .rs__control,
  .template-minimal .select__control {
    min-height: 50px !important;
    background: var(--bg-input) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: var(--radius-md) !important;

    &:hover {
      border-color: #484f58 !important;
    }

    &--is-focused {
      border-color: var(--border-focus) !important;
      box-shadow: 0 0 0 3px var(--accent-light) !important;
    }
  }

  .rs__single-value,
  .rs__placeholder {
    color: var(--text-primary) !important;
  }

  .rs__menu {
    background: var(--bg-card) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: var(--radius-md) !important;
  }

  .rs__option {
    color: var(--text-primary) !important;
    &--is-focused {
      background: var(--bg-input) !important;
    }
    &--is-selected {
      background: var(--accent) !important;
    }
  }

  /* Submit Button with Icon */
  .template-minimal .btn--style-primary {
    width: 100% !important;
    height: 50px !important;
    padding: 0 24px !important;
    font-size: 0.9375rem !important;
    font-weight: 600 !important;
    font-family: inherit !important;
    border-radius: var(--radius-md) !important;
    background: var(--accent) !important;
    border: none !important;
    color: var(--bg-dark) !important;
    cursor: pointer !important;
    transition: all var(--transition) !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 8px !important;

    &:hover {
      background: var(--accent-hover) !important;
    }

    &:focus {
      outline: none !important;
      box-shadow: 0 0 0 3px var(--accent-light) !important;
    }
  }

  /* Footer - SSL notice (after form, full width) */
  .template-minimal form::after {
    content: 'Connexion sécurisée SSL' !important;
    grid-row: 4 !important;
    grid-column: 1 / -1 !important;
    order: 6 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 6px !important;
    margin-top: 8px !important;
    padding-bottom: 8px !important;
    font-size: 0.75rem !important;
    color: var(--text-muted) !important;
  }

  /* Links */
  .template-minimal a {
    color: var(--accent) !important;
    text-decoration: none !important;
    transition: color var(--transition) !important;

    &:hover {
      color: var(--accent-hover) !important;
      text-decoration: underline !important;
    }
  }

  /* Error Messages */
  .template-minimal .field-error,
  .template-minimal .error {
    color: #f85149 !important;
    font-size: 0.75rem !important;
    margin-top: 6px !important;
  }

  /* ============================================
     Responsive - Stack on mobile
     ============================================ */
  @media (max-width: 640px) {
    .template-minimal {
      padding: 30px 20px !important;
    }

    .template-minimal__wrap {
      max-width: 100% !important;
    }

    .template-minimal__wrap > *:not(style) {
      padding: 32px 24px 24px !important;
    }

    .template-minimal form {
      grid-template-columns: 1fr !important;
      grid-template-rows: auto !important;
    }

    /* Reset order on mobile - stack vertically */
    .template-minimal form > .field-type:nth-child(1),
    .template-minimal form > .field-type:nth-child(2),
    .template-minimal form > .field-type:nth-child(3),
    .template-minimal form > .field-type:nth-child(4) {
      grid-column: 1 !important;
      grid-row: auto !important;
    }

    .template-minimal form > .field-type:nth-child(4) { order: 1 !important; }
    .template-minimal form > .field-type:nth-child(1) { order: 2 !important; }
    .template-minimal form > .field-type:nth-child(2) { order: 3 !important; }
    .template-minimal form > .field-type:nth-child(3) { order: 4 !important; }

    .template-minimal .form-submit {
      grid-row: auto !important;
    }

    .template-minimal h1 {
      font-size: 1.5rem !important;
    }
  }

  /* ============================================
     Admin Dashboard Styles
     ============================================ */
  .template-default {
    background: #f8fafc !important;
  }

  /* Sidebar Navigation */
  .nav {
    background: #ffffff !important;
    border-right: 1px solid #e2e8f0 !important;
  }

  .nav-group__toggle {
    font-size: 0.75rem !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.05em !important;
    color: #94a3b8 !important;
    padding: 8px 16px !important;
  }

  .nav__link {
    border-radius: 6px !important;
    margin: 2px 8px !important;
    padding: 10px 12px !important;
    font-size: 0.875rem !important;

    &:hover {
      background: #f1f5f9 !important;
    }

    &.active {
      background: rgba(99, 102, 241, 0.1) !important;
      color: #6366f1 !important;
    }
  }

  .app-header {
    background: #ffffff !important;
    border-bottom: 1px solid #e2e8f0 !important;
  }

  .card {
    border-radius: 12px !important;
    border: 1px solid #e2e8f0 !important;
    background: #ffffff !important;
  }

  /* General form inputs in admin */
  .template-default input[type="text"],
  .template-default input[type="email"],
  .template-default input[type="password"],
  .template-default input[type="number"],
  .template-default input[type="url"],
  .template-default textarea {
    border: 1px solid #e2e8f0 !important;
    border-radius: 8px !important;
    padding: 0 16px !important;
    height: 44px !important;

    &:focus {
      border-color: #6366f1 !important;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1) !important;
    }
  }

  .template-default textarea {
    height: auto !important;
    min-height: 100px !important;
    padding: 12px 16px !important;
  }

  .template-default .btn--style-primary {
    background: #6366f1 !important;
    border-radius: 8px !important;

    &:hover {
      background: #4f46e5 !important;
    }
  }

  .template-default .rs__control {
    border: 1px solid #e2e8f0 !important;
    border-radius: 8px !important;
    min-height: 44px !important;

    &--is-focused {
      border-color: #6366f1 !important;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1) !important;
    }
  }
}
